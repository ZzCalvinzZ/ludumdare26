// Generated by CoffeeScript 1.6.2
(function() {
  var setupWorld;

  goog.provide('game');

  goog.require('lime.Director');

  goog.require('lime.Scene');

  goog.require('lime.Layer');

  goog.require('lime.Circle');

  goog.require('lime.Label');

  goog.require('lime.animation.Spawn');

  goog.require('lime.animation.FadeTo');

  goog.require('lime.animation.ScaleTo');

  goog.require('lime.animation.MoveTo');

  goog.require('box2d.BodyDef');

  goog.require('box2d.BoxDef');

  goog.require('box2d.CircleDef');

  goog.require('box2d.CircleShape');

  goog.require('box2d.PolyDef');

  goog.require('box2d.Vec2');

  goog.require('box2d.JointDef');

  goog.require('box2d.MouseJointDef');

  goog.require('box2d.World');

  goog.require('game.TitleScreen');

  goog.require('game.GameScene');

  goog.require('game.Player');

  goog.require('game.Object');

  goog.require('game.Bottom');

  goog.require('game.Enemy');

  game.worldObjects = [];

  game.start = function() {
    this.WIDTH = 1024;
    this.HEIGHT = 768;
    game.director = new lime.Director(document.body, game.WIDTH, game.HEIGHT);
    game.world = setupWorld();
    game.titleScreen();
    return lime.scheduleManager.schedule(function(dt) {
      var item, _i, _len, _ref, _results;

      game.world.Step(dt / 1000, 3);
      _ref = game.worldObjects;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        item = _ref[_i];
        _results.push(item.updateFromBody());
      }
      return _results;
    });
  };

  setupWorld = function() {
    var bounds, gravity;

    gravity = new box2d.Vec2(0, 200);
    bounds = new box2d.AABB();
    bounds.minVertex.Set(-game.WIDTH, -game.HEIGHT);
    bounds.maxVertex.Set(2 * game.WIDTH, 2 * game.HEIGHT);
    return new box2d.World(bounds, gravity, true);
  };

  game.switchScene = function(sceneContents, transition, duration) {
    var layer, scene;

    scene = new lime.Scene();
    layer = new lime.Layer();
    scene.appendChild(layer);
    layer.appendChild(sceneContents);
    return game.director.replaceScene(scene, transition, duration);
  };

  game.titleScreen = function() {
    var scene, transition;

    scene = new game.TitleScreen();
    transition = lime.transitions.Dissolve;
    return game.switchScene(scene, transition, 2);
  };

  game.startGame = function(mode) {
    var scene;

    scene = new game.GameScene();
    return game.switchScene(scene, lime.transitions.SlideInRight, 1);
  };

  goog.exportSymbol('game.start', game.start);

}).call(this);
